import Z from"./DsEcDLEy.js";import ee from"./ClP1XOMI.js";import{_ as te}from"./l7XQXwAd.js";import{H as $,I as ae,J as ne,K as oe,d as S,L as se,b as q,e as U,o as m,q as x,F as E,r as V,n as y,i as t,k as c,l as w,M as re,f as A,j as I,m as T,N as le,u as ce,c as z,v as R,h as p,_ as ie,a as ue,A as j,O as de,P,w as v,B as M,G as pe,Q as me,g as ge,D as _e,R as fe,S as ve}from"./D-PSXSB2.js";import{f as he,_ as ye,a as be}from"./Bja5M3Vq.js";import ke from"./CQ9MK_Fw.js";import xe from"./ByGvoVOY.js";import{u as Ce}from"./yZ4Q2U5S.js";import{m as we,f as Be}from"./DbvWRElB.js";import"./DnF3PUft.js";import"./C-F1gjmX.js";import"./B9YCzsiH.js";const $e=()=>{const o=$(),a=$([]),r=$([]),i=e=>{e.forEach(s=>{const u=s.target.id;s.isIntersecting?a.value=[...a.value,u]:a.value=a.value.filter(g=>g!==u)})},n=e=>{e.forEach(s=>{o.value&&o.value.observe(s)})};return ae(a,(e,s)=>{e.length===0?r.value=s:r.value=e}),ne(()=>o.value=new IntersectionObserver(i)),oe(()=>{var e;return(e=o.value)==null?void 0:e.disconnect()}),{visibleHeadings:a,activeHeadings:r,updateHeadings:n}},Ae=["href","onClick"],F=S({inheritAttrs:!1,__name:"ContentTocLinks",props:{links:{type:Array,default:()=>[]},class:{type:[String,Object,Array],default:void 0},ui:{type:Object,default:()=>({})}},emits:["move"],setup(o,{emit:a}){const r={wrapper:"space-y-1",base:"block text-sm/6 truncate",active:"text-primary",inactive:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200",depth:"ml-3"},i=o,n=a,e=se(),s=le(),{activeHeadings:u,updateHeadings:g}=$e(),{ui:l,attrs:b}=q("content.toc.links",U(i,"ui"),r,U(i,"class"),!0);s.hooks.hookOnce("page:finish",()=>{g([...document.querySelectorAll("h2"),...document.querySelectorAll("h3")])});const h=_=>{const f=encodeURIComponent(_);e.push(`#${f}`),n("move",_)};return(_,f)=>{var B;const k=F;return(B=o.links)!=null&&B.length?(m(),x("ul",T({key:0,class:t(l).wrapper},t(b)),[(m(!0),x(E,null,V(o.links,d=>(m(),x("li",{key:d.text,class:y([t(l).wrapper,d.depth===3&&t(l).depth])},[c("a",{href:`#${d.id}`,class:y([t(l).base,t(u).includes(d.id)?t(l).active:t(l).inactive]),onClick:re(N=>h(d.id),["prevent"])},w(d.text),11,Ae),d.children?(m(),A(k,{key:0,links:d.children},null,8,["links"])):I("",!0)],2))),128))],16)):I("",!0)}}}),Ue=S({inheritAttrs:!1,__name:"ContentToc",props:{title:{type:String,default:"Table of Contents"},links:{type:Array,default:()=>[]},class:{type:[String,Object,Array],default:void 0},ui:{type:Object,default:()=>({})}},setup(o){const a=ce(),r=z(()=>({wrapper:"sticky top-[--header-height] bg-background/75 backdrop-blur -mx-4 sm:-mx-6 px-4 sm:px-6 lg:px-4 lg:-mx-4 overflow-y-auto max-h-[calc(100vh-var(--header-height))]",container:{base:"py-3 lg:py-8 border-b border-dashed border-gray-200 dark:border-gray-800 lg:border-0 space-y-3",empty:"lg:py-8 space-y-3"},button:{base:"flex items-center gap-1.5 lg:cursor-text lg:select-text w-full group",label:"font-semibold text-sm/6 truncate",trailingIcon:{name:a.ui.icons.chevron,base:"w-5 h-5 ms-auto transform transition-transform duration-200 flex-shrink-0 mr-1.5",active:"text-gray-700 dark:text-gray-200",inactive:"text-gray-500 dark:text-gray-400 group-hover:text-gray-700 dark:group-hover:text-gray-200 -rotate-90"}},links:{}})),i=o,{ui:n,attrs:e}=q("content.toc",U(i,"ui"),r,U(i,"class"),!0),s=$(!1);return(u,g)=>{var h,_;const l=ie,b=F;return m(),x("nav",T({class:t(n).wrapper},t(e)),[c("div",{class:y([(h=o.links)!=null&&h.length?t(n).container.base:t(n).container.empty])},[R(u.$slots,"top"),(_=o.links)!=null&&_.length?(m(),x("button",{key:0,class:y(t(n).button.base),tabindex:"-1",onClick:g[0]||(g[0]=f=>s.value=!t(s))},[c("span",{class:y(t(n).button.label)},w(o.title),3),p(l,{name:t(n).button.trailingIcon.name,class:y(["lg:!hidden",[t(n).button.trailingIcon.base,t(s)?t(n).button.trailingIcon.active:t(n).button.trailingIcon.inactive]])},null,8,["name","class"])],2)):I("",!0),p(b,{links:o.links,ui:t(n).links,class:y([t(s)?"lg:block":"hidden lg:block"])},null,8,["links","ui","class"]),R(u.$slots,"bottom")],2)],16)}}}),Ie={class:"flex items-center space-x-2"},Se={class:"text-gray-500 dark:text-gray-400"},Te={class:"mt-4 flex flex-wrap items-center gap-6"},Ne={class:"text-left"},De={class:"font-medium"},He={class:"text-gray-500 dark:text-gray-400 leading-4"},Le={class:"hidden lg:block space-y-6"},Je=S({__name:"[...slug]",async setup(o){var l,b,h,_;let a,r;const i=ue();Ce();const{data:n}=([a,r]=j(()=>M("navigation",()=>_e())),a=await a,r(),a),{data:e}=([a,r]=j(()=>M(i.path,()=>fe(i.path).findOne(),"$3l9wwpBX1R")),a=await a,r(),a);if(!e.value)throw de({statusCode:404,statusMessage:"Article not found",fatal:!0});const s=z(()=>{let f=we(Be(n.value,e.value)).map(k=>({label:k.label,to:["/blogs"].includes(k.to)?k.to:void 0}));return f.push({label:e.value.title}),f});P({title:((l=e.value.head)==null?void 0:l.title)||e.value.title,description:((b=e.value.head)==null?void 0:b.description)||e.value.description});const u=((h=e.value.head)==null?void 0:h.title)||e.value.title,g=((_=e.value.head)==null?void 0:_.description)||e.value.description;return P({titleTemplate:"%s · seYa Blog",title:u,description:g,ogDescription:g,ogTitle:`${u} · seYa Blog`}),(f,k)=>{const B=Z,d=ee,N=te,Y=ve,G=ye,J=ke,K=be,Q=xe,X=Ue,D=pe;return m(),A(D,null,{default:v(()=>{var H,L,O;return[p(G,T(t(e),{ui:{headline:"justify-between"}}),{headline:v(()=>[p(B,{links:t(s)},null,8,["links"]),c("div",Ie,[p(d,{label:t(e).category,variant:"subtle"},null,8,["label"]),c("span",Se,[me(" ·   "),c("time",null,w(("formatDateByLocale"in f?f.formatDateByLocale:t(he))("zh-CN",t(e).date)),1)])])]),default:v(()=>[c("div",Te,[(m(!0),x(E,null,V(t(e).authors,(C,W)=>(m(),A(Y,{key:W,to:C.link,target:"_blank",color:"white",variant:"ghost",class:"-my-1.5 -mx-2.5"},{default:v(()=>[p(N,{src:C.avatarUrl,alt:C.name},null,8,["src","alt"]),c("div",Ne,[c("p",De,w(C.name),1),c("p",He,w(`@${C.link.split("/").pop()}`),1)])]),_:2},1032,["to"]))),128))])]),_:1},16),p(D,null,ge({default:v(()=>[p(K,{prose:"",class:"dark:text-gray-300 dark:prose-pre:!bg-gray-800/60"},{default:v(()=>[t(e)&&t(e).body?(m(),A(J,{key:0,value:t(e)},null,8,["value"])):I("",!0)]),_:1})]),_:2},[(O=(L=(H=t(e).body)==null?void 0:H.toc)==null?void 0:L.links)!=null&&O.length?{name:"right",fn:v(()=>[p(X,{links:t(e).body.toc.links},{bottom:v(()=>[c("div",Le,[p(Q,{type:"dashed"})])]),_:1},8,["links"])]),key:"0"}:void 0]),1024)]}),_:1})}}});export{Je as default};
